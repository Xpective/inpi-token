<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InPinity Token Hub | Base Network</title>
    <!-- Uniswap Widget Bibliothek -->
    <script src="https://embed.uniswap.org/embed.js"></script>
    <style>
        /* Grundlegendes Styling f√ºr die Token-Seite */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #0f0e17 0%, #1a1a2e 100%);
            color: #fffffe;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            padding-bottom: 20px;
            border-bottom: 1px solid #2a283a;
        }
        h1 {
            color: #7f9cf5;
            margin: 0;
        }
        .wallet-section {
            min-width: 200px;
        }
        #connectButton {
            background: #3d5afe;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        #connectButton:hover {
            background: #2a4cff;
            transform: translateY(-2px);
        }
        #walletAddress {
            background: #24232e;
            padding: 12px 20px;
            border-radius: 12px;
            font-family: monospace;
            word-break: break-all;
        }
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 50px;
        }
        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        .card {
            background: #1b1a23;
            border-radius: 20px;
            padding: 30px;
            border: 1px solid #2a283a;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        .card h2 {
            margin-top: 0;
            color: #7f9cf5;
            border-bottom: 2px solid #3d5afe;
            padding-bottom: 10px;
        }
        .token-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .token-item {
            background: #24232e;
            padding: 18px;
            border-radius: 14px;
            border-left: 5px solid #3d5afe;
            transition: transform 0.3s;
        }
        .token-item:hover {
            transform: translateX(5px);
        }
        .token-symbol {
            font-weight: bold;
            font-size: 1.1em;
            color: #7f9cf5;
            display: block;
            margin-bottom: 5px;
        }
        .token-address {
            font-family: monospace;
            font-size: 0.9em;
            color: #a0a0b0;
            word-break: break-all;
        }
        .copy-btn {
            background: #3d5afe;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.8em;
            margin-top: 8px;
            transition: all 0.2s;
        }
        .copy-btn:hover {
            background: #2a4cff;
        }
        .copy-btn.copied {
            background: #10b981;
        }
        #uniswapContainer {
            min-height: 500px;
        }
        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #2a283a;
            color: #a0a0b0;
            font-size: 0.9em;
        }
        .back-link {
            display: inline-block;
            margin-top: 20px;
            color: #7f9cf5;
            text-decoration: none;
            padding: 10px 20px;
            border: 1px solid #3d5afe;
            border-radius: 10px;
            transition: all 0.3s;
        }
        .back-link:hover {
            background: #3d5afe;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ InPinity Token Hub - Base Network</h1>
            <div class="wallet-section">
                <button id="connectButton">üîó Wallet verbinden</button>
                <div id="walletAddress" style="display:none;"></div>
            </div>
        </header>

        <div class="main-content">
            <!-- Linke Spalte: Token-Liste -->
            <section class="card">
                <h2>üìã Token Contracts auf Base</h2>
                <p>Alle offiziellen Contract-Adressen f√ºr das InPinity-√ñkosystem:</p>
                <div class="token-list" id="tokenList">
                    <!-- Token werden hier via JavaScript eingef√ºgt -->
                </div>
            </section>

            <!-- Rechte Spalte: Uniswap Widget -->
            <section class="card">
                <h2>üîÑ Direkt auf InPinity swappen</h2>
                <p>Kaufe deine Tokens direkt √ºber das sichere Uniswap Widget:</p>
                <div id="uniswapContainer"></div>
            </section>
        </div>

        <footer>
            <p>Handel √ºber das <a href="https://uniswap.org" target="_blank" style="color:#7f9cf5;">Uniswap Protocol</a> auf dem <a href="https://base.org" target="_blank" style="color:#7f9cf5;">Base Network</a>.</p>
            <p><strong>Wichtig:</strong> Stelle sicher, dass deine Wallet auf das Base Network eingestellt ist.</p>
            <a href="index.html" class="back-link">‚Üê Zur√ºck zur InPinity Hauptseite</a>
        </footer>
    </div>

    <script>
        // 1. TOKEN-DATEN (alle Contract-Adressen von dir)
        const TOKENS = [
            { symbol: "InPinity", address: "0x15ac8e2c38f0c644123e61011e7113de56038453" },
            { symbol: "cbBTC", address: "0xcbb7c0000ab88b473b1f5afd9ef808440eed33bf" },
            { symbol: "WBTC", address: "0x0555e30da8f98308edb960aa94c0db47230d2b9c" },
            { symbol: "USDC", address: "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913" },
            { symbol: "ETH", address: "0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE" }, // Standard ETH placeholder
            { symbol: "TOSHI", address: "0xac1bd2486aaf3b5c0fc3fd868558b082a531b2b4" }
        ];

        // 2. WALLET-VERBINDUNG (einfach mit MetaMask)
        let userAddress = null;
        const connectButton = document.getElementById('connectButton');
        const walletAddress = document.getElementById('walletAddress');

        async function connectWallet() {
            if (window.ethereum) {
                try {
                    const accounts = await window.ethereum.request({ 
                        method: 'eth_requestAccounts' 
                    });
                    userAddress = accounts[0];
                    updateWalletUI();
                    console.log("Verbunden mit:", userAddress);
                } catch (error) {
                    console.error("Verbindung abgelehnt:", error);
                    alert("Wallet-Verbindung wurde abgelehnt.");
                }
            } else {
                alert("Bitte installiere MetaMask oder ein kompatibles Web3-Wallet!");
                window.open("https://metamask.io", "_blank");
            }
        }

        function updateWalletUI() {
            if (userAddress) {
                const shortAddr = `${userAddress.substring(0, 6)}...${userAddress.substring(38)}`;
                connectButton.style.display = 'none';
                walletAddress.style.display = 'block';
                walletAddress.innerHTML = `‚úÖ Verbunden: <strong>${shortAddr}</strong>`;
            } else {
                connectButton.style.display = 'block';
                walletAddress.style.display = 'none';
            }
        }

        // 3. TOKEN-LISTE ANZEIGEN
        function renderTokenList() {
            const container = document.getElementById('tokenList');
            container.innerHTML = '';
            
            TOKENS.forEach(token => {
                const tokenElement = document.createElement('div');
                tokenElement.className = 'token-item';
                tokenElement.innerHTML = `
                    <span class="token-symbol">${token.symbol}</span>
                    <span class="token-address">${token.address}</span>
                    <button class="copy-btn" data-address="${token.address}">üìã Adresse kopieren</button>
                `;
                container.appendChild(tokenElement);
            });

            // Copy-Buttons Funktion hinzuf√ºgen
            document.querySelectorAll('.copy-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const address = this.getAttribute('data-address');
                    navigator.clipboard.writeText(address).then(() => {
                        const originalText = this.textContent;
                        this.textContent = '‚úÖ Kopiert!';
                        this.classList.add('copied');
                        setTimeout(() => {
                            this.textContent = originalText;
                            this.classList.remove('copied');
                        }, 2000);
                    });
                });
            });
        }

        // 4. UNISWAP WIDGET LADEN
        function loadUniswapWidget() {
            if (typeof uniswapWidget !== 'undefined') {
                uniswapWidget({
                    container: document.getElementById('uniswapContainer'),
                    theme: 'dark',
                    width: '100%',
                    height: '500px',
                    // Dein InPinity Token als Standard-Output
                    defaultOutputTokenAddress: '0x15ac8e2c38f0c644123e61011e7113de56038453',
                    // Optional: ETH als Standard-Input
                    defaultInputTokenAddress: '0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE',
                    // Chain auf Base setzen (Chain-ID 8453)
                    chainId: 8453
                });
                console.log("Uniswap Widget geladen");
            } else {
                console.log("Warte auf Uniswap Widget...");
                setTimeout(loadUniswapWidget, 500);
            }
        }

        // 5. ALLES INITIALISIEREN
        document.addEventListener('DOMContentLoaded', () => {
            // Wallet-Button Event
            connectButton.addEventListener('click', connectWallet);
            
            // Token-Liste rendern
            renderTokenList();
            
            // Uniswap Widget laden
            loadUniswapWidget();
            
            // Auf Wallet-√Ñnderungen reagieren
            if (window.ethereum) {
                window.ethereum.on('accountsChanged', (accounts) => {
                    userAddress = accounts[0] || null;
                    updateWalletUI();
                });
                
                // Auf Netzwerk-Wechsel reagieren
                window.ethereum.on('chainChanged', (chainId) => {
                    if (chainId !== '0x2105') { // 0x2105 = Base Mainnet (8453)
                        alert("Bitte wechsle zum Base Network (Chain ID: 8453)!");
                    }
                });
            }
        });
    </script>
</body>
</html>
